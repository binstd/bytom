{"data":{"markdownRemark":{"html":"<p>在前一篇文章中，我们试图理解比原是如何交易的，但是由于内容太多，我们把它分成了几个小问题，并在前一篇解决了“在dashboard中如何提交交易信息”，以及“比原后台是如何操作的”。</p>\n<p>在本文我们继续研究下一个问题：在提交的交易成功完成后，前端会以列表的方式显示交易信息，它是如何拿到后台的数据的？也就是下图是如何实现的：\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bytom-transaction2-589000e82808cdc41a92f1f1053ab397-79b99.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 840px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 77.41228070175438%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAC30lEQVQ4y2VT2U5UQRS8fwCaiDwYtiDgOCyDKIsKMSQYX/wCv0o0MQwIauK7X+APmPgBJi6EZZjlrt199ynr9NwxMdzkZKa7T1efc6rK2d59ga2dPaxu7GB8ch4nnz5DG4MkTWG/fr/66V+Loizt2TevjVffv+JL6zecxvo2FpbXMVtr4Ob4NA6PP9okrTWSJIWJYxgTI04SZFlm9+S/RJ7nKPICfmzQ0hEC3nFmV9Yx01jH1N1FjIxNoHl0YgE73R5UGEIxSVXgRVEgZeWxfcRg+Kk0gckzpNx3ltae4tHjXUzM1jF6exIH7z/YJM/1kPNykuVQvOwHoW3RSJVlYXNkrZgTZoPxGFbt1FY2cI8tT80tEXAKB2/fAZEP3bpAfHUJfXluQ12cwXBPt87tmanCnnNPctUpZ1hvbP4H2Hy9D7B81/OgogghKwuCAIZtF6wuZrVaKXvWF1JIjmcUfLadnP4i4OoW5uprmJ4fAr4RThGEkWXSxAkiAvh+YGcobcV8UM5KGQFbDpIYooX47A+c+cWHWGBMS4XjQ0CS4vmDgRPQJdgVSSp5KyKAqmYoICEfcLPErhMBFDKk3ZmFZYyQlOY+AXUI7+Icme9Cd9oIW5fwzs8Q97pQ3Ta02+WZZ9dB+wq610EecO4/f8DZ3N7Ds72XFPdz3GCFB81jgC8G7TYUL4SdDqJuB8ZzkfKScV2CDvbzKESpIvh8QML4PpzFB09wn0zXqEcLeDSQTZeyiSlokU2cUmMUsbSYc24pZ5lVLrFy4QhSnoq7nDszNUhI2yO3Jgg4EHZAlrPKJREZ9fm6iFo0qcmoEJKJBsl+QKf0+Yi4y5mkQyRmFlYwOkZhHw4AhVnxtFLahjjDVA7RlXvEMQlJUUYjMpKnBLD+D3BgvarlXg8RpSMXBVyqk6qG1tOsfPiFrDjk3BMq4hrgcIYuZZLzYkoxS1UBfV0WJWKxXpHbHFlrqXBoPeb/Bcr06hS6zTsiAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"bytom-transaction2\"\n        title=\"\"\n        src=\"/static/bytom-transaction2-589000e82808cdc41a92f1f1053ab397-acf85.png\"\n        srcset=\"/static/bytom-transaction2-589000e82808cdc41a92f1f1053ab397-c1418.png 210w,\n/static/bytom-transaction2-589000e82808cdc41a92f1f1053ab397-5d5d8.png 420w,\n/static/bytom-transaction2-589000e82808cdc41a92f1f1053ab397-acf85.png 840w,\n/static/bytom-transaction2-589000e82808cdc41a92f1f1053ab397-79b99.png 912w\"\n        sizes=\"(max-width: 840px) 100vw, 840px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>由于它同时涉及到了前端和后端，所以我们同样把它分成了两个小问题：</p>\n<ol>\n<li>前端是如何获取交易数据并显示出来的？</li>\n<li>后端是如何找到交易数据的？</li>\n</ol>\n<p>下面依次解决。</p>\n<h2 id=\"前端是如何获取交易数据并显示出来的？\"><a href=\"#%E5%89%8D%E7%AB%AF%E6%98%AF%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E4%BA%A4%E6%98%93%E6%95%B0%E6%8D%AE%E5%B9%B6%E6%98%BE%E7%A4%BA%E5%87%BA%E6%9D%A5%E7%9A%84%EF%BC%9F\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>前端是如何获取交易数据并显示出来的？</h2>\n<p>我们先在比原的前端代码库中寻找。由于这个功能是“列表分页”显示，这让我想起了前面有一个类似的功能是分页显示余额，那里用的是<code class=\"gatsby-code-text\">src/features/shared/components/BaseList</code>提供的通用组件，所以这边应该也是一样。</p>\n<p>经过查看，果然在<code class=\"gatsby-code-text\">src/features/transactions/components/</code>下面发现了<code class=\"gatsby-code-text\">List.jsx</code>文件，且目录结构跟<code class=\"gatsby-code-text\">src/features/balances/components/</code>非常相似，再大略看一下代码，就能确定使用了一样的方法。</p>\n<p>但是如果回想一下，过程似乎还是有点不同。在显示余额那里，是我们手动点击了左侧栏的菜单，使得前端的路由转到了<code class=\"gatsby-code-text\">/balances</code>，然后由</p>\n<p><a href=\"https://github.com/freewind/bytom-dashboard-v1.0.0/blob/master/src/features/shared/routes.js#L5-L44\">src/features/shared/routes.js#L5-L44</a></p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">makeRoutes</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">,</span> List<span class=\"token punctuation\">,</span> New<span class=\"token punctuation\">,</span> Show<span class=\"token punctuation\">,</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    path<span class=\"token punctuation\">:</span> options<span class=\"token punctuation\">.</span>path <span class=\"token operator\">||</span> type <span class=\"token operator\">+</span> <span class=\"token string\">'s'</span><span class=\"token punctuation\">,</span>\n    component<span class=\"token punctuation\">:</span> RoutingContainer<span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> options<span class=\"token punctuation\">.</span>name <span class=\"token operator\">||</span> <span class=\"token function\">humanize</span><span class=\"token punctuation\">(</span>type <span class=\"token operator\">+</span> <span class=\"token string\">'s'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    name_zh<span class=\"token punctuation\">:</span> options<span class=\"token punctuation\">.</span>name_zh<span class=\"token punctuation\">,</span>\n    indexRoute<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      component<span class=\"token punctuation\">:</span> List<span class=\"token punctuation\">,</span>\n      onEnter<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>nextState<span class=\"token punctuation\">,</span> replace<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">loadPage</span><span class=\"token punctuation\">(</span>nextState<span class=\"token punctuation\">,</span> replace<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      onChange<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">,</span> nextState<span class=\"token punctuation\">,</span> replace<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token function\">loadPage</span><span class=\"token punctuation\">(</span>nextState<span class=\"token punctuation\">,</span> replace<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    childRoutes<span class=\"token punctuation\">:</span> childRoutes\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>中的<code class=\"gatsby-code-text\">onEnter</code>或者<code class=\"gatsby-code-text\">onChange</code>触发了<code class=\"gatsby-code-text\">loadPage</code>，最后一步步调用了后台接口<code class=\"gatsby-code-text\">/list-balances</code>。而这次在本文的例子中，它是在提交了“提交交易”表单成功后，自动转到了“列表显示交易”的页面，会不会同样触发<code class=\"gatsby-code-text\">onEnter</code>或者<code class=\"gatsby-code-text\">onChange</code>呢？</p>\n<p>答案是会的，因为在前文中，当<code class=\"gatsby-code-text\">submitForm</code>执行后，向后台的最后一个请求<code class=\"gatsby-code-text\">/submit-transaction</code>成功以后，会调用<code class=\"gatsby-code-text\">dealSignSubmitResp</code>这个函数，而它的定义是：</p>\n<p><a href=\"https://github.com/freewind/bytom-dashboard-v1.0.0/blob/master/src/features/transactions/actions.js#L120-L132\">src/features/transactions/actions.js#L120-L132</a></p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dealSignSubmitResp</span> <span class=\"token operator\">=</span> resp <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    pathname<span class=\"token punctuation\">:</span> <span class=\"token string\">'/transactions'</span><span class=\"token punctuation\">,</span>\n    state<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      preserveFlash<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>可以看到，它最后也会切换前端路由到<code class=\"gatsby-code-text\">/transactions</code>，跟显示余额那里就是完全一样的路线了。所以按照那边的经验，到最后一定会访问后台的<code class=\"gatsby-code-text\">/list-transactions</code>接口。</p>\n<p>这过程中的推导就不再详说，需要的话可以看前面讲解“比原是如何显示余额的”那篇文章。</p>\n<p>最后拿到了后台返回的数据如何以表格形式显示出来，在那篇文章中也提到，这里也跳过。</p>\n<h2 id=\"后端是如何找到交易数据的？\"><a href=\"#%E5%90%8E%E7%AB%AF%E6%98%AF%E5%A6%82%E4%BD%95%E6%89%BE%E5%88%B0%E4%BA%A4%E6%98%93%E6%95%B0%E6%8D%AE%E7%9A%84%EF%BC%9F\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>后端是如何找到交易数据的？</h2>\n<p>当我们知道了前端会访问后台的<code class=\"gatsby-code-text\">/list-transactions</code>接口后，我们就很容易的在比原的主项目仓库中找到下面的代码：</p>\n<p><a href=\"https://github.com/freewind/bytom-v1.0.1/blob/master/api/api.go#L164-L244\">api/api.go#L164-L244</a></p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-go\"><code class=\"gatsby-code-go\"><span class=\"token keyword\">func</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">*</span>API<span class=\"token punctuation\">)</span> <span class=\"token function\">buildHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token keyword\">if</span> a<span class=\"token punctuation\">.</span>wallet <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// ...</span>\n        m<span class=\"token punctuation\">.</span><span class=\"token function\">Handle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/list-transactions\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">jsonHandler</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>listTransactions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>可以看到，<code class=\"gatsby-code-text\">list-transactions</code>对应的handler是<code class=\"gatsby-code-text\">a.listTransactions</code>：</p>\n<p><a href=\"https://github.com/freewind/bytom-v1.0.1/blob/master/api/query.go#L83-L107\">api/query.go#L83-L107</a></p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token function\">func</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">*</span><span class=\"token constant\">API</span><span class=\"token punctuation\">)</span> <span class=\"token function\">listTransactions</span><span class=\"token punctuation\">(</span>ctx context<span class=\"token punctuation\">.</span>Context<span class=\"token punctuation\">,</span> filter struct <span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">ID</span>        string <span class=\"token template-string\"><span class=\"token string\">`json:\"id\"`</span></span>\n    AccountID string <span class=\"token template-string\"><span class=\"token string\">`json:\"account_id\"`</span></span>\n    Detail    bool   <span class=\"token template-string\"><span class=\"token string\">`json:\"detail\"`</span></span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> Response <span class=\"token punctuation\">{</span>\n    transactions <span class=\"token punctuation\">:</span><span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>query<span class=\"token punctuation\">.</span>AnnotatedTx<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">var</span> err error\n\n    <span class=\"token comment\">// 1. </span>\n    <span class=\"token keyword\">if</span> filter<span class=\"token punctuation\">.</span>AccountID <span class=\"token operator\">!=</span> <span class=\"token string\">\"\"</span> <span class=\"token punctuation\">{</span>\n        transactions<span class=\"token punctuation\">,</span> err <span class=\"token operator\">=</span> a<span class=\"token punctuation\">.</span>wallet<span class=\"token punctuation\">.</span><span class=\"token function\">GetTransactionsByAccountID</span><span class=\"token punctuation\">(</span>filter<span class=\"token punctuation\">.</span>AccountID<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        transactions<span class=\"token punctuation\">,</span> err <span class=\"token operator\">=</span> a<span class=\"token punctuation\">.</span>wallet<span class=\"token punctuation\">.</span><span class=\"token function\">GetTransactionsByTxID</span><span class=\"token punctuation\">(</span>filter<span class=\"token punctuation\">.</span><span class=\"token constant\">ID</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token comment\">// 2.</span>\n    <span class=\"token keyword\">if</span> filter<span class=\"token punctuation\">.</span>Detail <span class=\"token operator\">==</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">{</span>\n        txSummary <span class=\"token punctuation\">:</span><span class=\"token operator\">=</span> a<span class=\"token punctuation\">.</span>wallet<span class=\"token punctuation\">.</span><span class=\"token function\">GetTransactionsSummary</span><span class=\"token punctuation\">(</span>transactions<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">NewSuccessResponse</span><span class=\"token punctuation\">(</span>txSummary<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">NewSuccessResponse</span><span class=\"token punctuation\">(</span>transactions<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>从这个方法的参数可以看到，前端是可以传过来<code class=\"gatsby-code-text\">id</code>，<code class=\"gatsby-code-text\">account_id</code>和<code class=\"gatsby-code-text\">detail</code>这三个参数的。而在本文的例子中，因为是直接跳转到<code class=\"gatsby-code-text\">/transactions</code>的路由，所以什么参数也没有传上来。</p>\n<p>我把代码分成了两块，一些错误处理的部分被我省略了。依次讲解：</p>\n<ol>\n<li>第1处是想根据参数来获取<code class=\"gatsby-code-text\">transactions</code>。如果<code class=\"gatsby-code-text\">account_id</code>有值，则拿它去取，即某个帐户拥有的交易；否则的话，用<code class=\"gatsby-code-text\">id</code>去取，这个id指的是交易的id。如果这两个都没有值，应该是在第二个分支中处理，即<code class=\"gatsby-code-text\">a.wallet.GetTransactionsByTxID</code>应该也可以处理参数为空字符串的情况</li>\n<li>第2处代码，如果<code class=\"gatsby-code-text\">detail</code>为<code class=\"gatsby-code-text\">false</code>（如果前端没传值，也应该是默认值<code class=\"gatsby-code-text\">false</code>，则将前面拿到的<code class=\"gatsby-code-text\">transactions</code>变成摘要，只返回部分信息；否则的话，返回完整信息。</li>\n</ol>\n<p>我们先进第1处代码中的<code class=\"gatsby-code-text\">a.wallet.GetTransactionsByAccountID</code>：</p>\n<p><a href=\"https://github.com/freewind/bytom-v1.0.1/blob/master/wallet/indexer.go#L505-L523\">wallet/indexer.go#L505-L523</a></p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-go\"><code class=\"gatsby-code-go\"><span class=\"token keyword\">func</span> <span class=\"token punctuation\">(</span>w <span class=\"token operator\">*</span>Wallet<span class=\"token punctuation\">)</span> <span class=\"token function\">GetTransactionsByAccountID</span><span class=\"token punctuation\">(</span>accountID <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>query<span class=\"token punctuation\">.</span>AnnotatedTx<span class=\"token punctuation\">,</span> <span class=\"token builtin\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    annotatedTxs <span class=\"token operator\">:=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>query<span class=\"token punctuation\">.</span>AnnotatedTx<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 1.</span>\n    txIter <span class=\"token operator\">:=</span> w<span class=\"token punctuation\">.</span>DB<span class=\"token punctuation\">.</span><span class=\"token function\">IteratorPrefix</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token function\">byte</span><span class=\"token punctuation\">(</span>TxPrefix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">defer</span> txIter<span class=\"token punctuation\">.</span><span class=\"token function\">Release</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// 2.</span>\n    <span class=\"token keyword\">for</span> txIter<span class=\"token punctuation\">.</span><span class=\"token function\">Next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 3.</span>\n        annotatedTx <span class=\"token operator\">:=</span> <span class=\"token operator\">&amp;</span>query<span class=\"token punctuation\">.</span>AnnotatedTx<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span> err <span class=\"token operator\">:=</span> json<span class=\"token punctuation\">.</span><span class=\"token function\">Unmarshal</span><span class=\"token punctuation\">(</span>txIter<span class=\"token punctuation\">.</span><span class=\"token function\">Value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>annotatedTx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">nil</span><span class=\"token punctuation\">,</span> err\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 4.</span>\n        <span class=\"token keyword\">if</span> <span class=\"token function\">findTransactionsByAccount</span><span class=\"token punctuation\">(</span>annotatedTx<span class=\"token punctuation\">,</span> accountID<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">annotateTxsAsset</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>query<span class=\"token punctuation\">.</span>AnnotatedTx<span class=\"token punctuation\">{</span>annotatedTx<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n            annotatedTxs <span class=\"token operator\">=</span> <span class=\"token function\">append</span><span class=\"token punctuation\">(</span>annotatedTxs<span class=\"token punctuation\">,</span> annotatedTx<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> annotatedTxs<span class=\"token punctuation\">,</span> <span class=\"token boolean\">nil</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>这里把代码分成了4块：</p>\n<ol>\n<li>第1处代码是遍历数据库中以<code class=\"gatsby-code-text\">TxPrefix</code>为前缀的值，其中<code class=\"gatsby-code-text\">TxPrefix</code>为<code class=\"gatsby-code-text\">TXS:</code>，下面要进行遍历。这里的<code class=\"gatsby-code-text\">DB</code>无\b疑是<code class=\"gatsby-code-text\">wallet</code>这个leveldb</li>\n<li>第2处开始进行遍历</li>\n<li>第3处是把每一个元素的<code class=\"gatsby-code-text\">Value</code>拿出来，它是JSON格式的，把它转成<code class=\"gatsby-code-text\">AnnotatedTx</code>对象。<code class=\"gatsby-code-text\">txIter</code>的每一个元素是一个key-pair，有<code class=\"gatsby-code-text\">Key()</code>，也有<code class=\"gatsby-code-text\">Value()</code>，这里只用到了<code class=\"gatsby-code-text\">Value()</code></li>\n<li>第4处是在当前的这个<code class=\"gatsby-code-text\">annotatedTx</code>对象中寻找，如果它的input或者output中包含的帐户的id等于<code class=\"gatsby-code-text\">accountId</code>，则它是我们需要的。后面再使用<code class=\"gatsby-code-text\">annotateTxsAsset</code>方法把<code class=\"gatsby-code-text\">annotatedTx</code>对象中的asset相关的属性（比如<code class=\"gatsby-code-text\">alias</code>等）补全。</li>\n</ol>\n<p>其中<code class=\"gatsby-code-text\">AnnotatedTx</code>的定义值得一看：</p>\n<p><a href=\"https://github.com/freewind/bytom-v1.0.1/blob/master/blockchain/query/annotated.go#L12-L22\">blockchain/query/annotated.go#L12-L22</a></p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-go\"><code class=\"gatsby-code-go\"><span class=\"token keyword\">type</span> AnnotatedTx <span class=\"token keyword\">struct</span> <span class=\"token punctuation\">{</span>\n    ID                     bc<span class=\"token punctuation\">.</span>Hash            <span class=\"token string\">`json:\"tx_id\"`</span>\n    Timestamp              <span class=\"token builtin\">uint64</span>             <span class=\"token string\">`json:\"block_time\"`</span>\n    BlockID                bc<span class=\"token punctuation\">.</span>Hash            <span class=\"token string\">`json:\"block_hash\"`</span>\n    BlockHeight            <span class=\"token builtin\">uint64</span>             <span class=\"token string\">`json:\"block_height\"`</span>\n    Position               <span class=\"token builtin\">uint32</span>             <span class=\"token string\">`json:\"block_index\"`</span>\n    BlockTransactionsCount <span class=\"token builtin\">uint32</span>             <span class=\"token string\">`json:\"block_transactions_count,omitempty\"`</span>\n    Inputs                 <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>AnnotatedInput  <span class=\"token string\">`json:\"inputs\"`</span>\n    Outputs                <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>AnnotatedOutput <span class=\"token string\">`json:\"outputs\"`</span>\n    StatusFail             <span class=\"token builtin\">bool</span>               <span class=\"token string\">`json:\"status_fail\"`</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>它其实就是为了持有最后返回给前端的数据，通过给每个字段添加JSON相关的<code class=\"gatsby-code-text\">annotation</code>方便转换成JSON。</p>\n<p>如果前端没有传<code class=\"gatsby-code-text\">account_id</code>参数，则会进入另一个分支，对应<code class=\"gatsby-code-text\">a.wallet.GetTransactionsByTxID(filter.ID)</code>：</p>\n<p><a href=\"https://github.com/freewind/bytom-v1.0.1/blob/master/wallet/indexer.go#L426-L450\">wallet/indexer.go#L426-L450</a></p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-go\"><code class=\"gatsby-code-go\"><span class=\"token keyword\">func</span> <span class=\"token punctuation\">(</span>w <span class=\"token operator\">*</span>Wallet<span class=\"token punctuation\">)</span> <span class=\"token function\">GetTransactionsByTxID</span><span class=\"token punctuation\">(</span>txID <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>query<span class=\"token punctuation\">.</span>AnnotatedTx<span class=\"token punctuation\">,</span> <span class=\"token builtin\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    annotatedTxs <span class=\"token operator\">:=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>query<span class=\"token punctuation\">.</span>AnnotatedTx<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    formatKey <span class=\"token operator\">:=</span> <span class=\"token string\">\"\"</span>\n\n    <span class=\"token keyword\">if</span> txID <span class=\"token operator\">!=</span> <span class=\"token string\">\"\"</span> <span class=\"token punctuation\">{</span>\n        rawFormatKey <span class=\"token operator\">:=</span> w<span class=\"token punctuation\">.</span>DB<span class=\"token punctuation\">.</span><span class=\"token function\">Get</span><span class=\"token punctuation\">(</span><span class=\"token function\">calcTxIndexKey</span><span class=\"token punctuation\">(</span>txID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> rawFormatKey <span class=\"token operator\">==</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">nil</span><span class=\"token punctuation\">,</span> fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Errorf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"No transaction(txid=%s) \"</span><span class=\"token punctuation\">,</span> txID<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n        formatKey <span class=\"token operator\">=</span> <span class=\"token function\">string</span><span class=\"token punctuation\">(</span>rawFormatKey<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    txIter <span class=\"token operator\">:=</span> w<span class=\"token punctuation\">.</span>DB<span class=\"token punctuation\">.</span><span class=\"token function\">IteratorPrefix</span><span class=\"token punctuation\">(</span><span class=\"token function\">calcAnnotatedKey</span><span class=\"token punctuation\">(</span>formatKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">defer</span> txIter<span class=\"token punctuation\">.</span><span class=\"token function\">Release</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> txIter<span class=\"token punctuation\">.</span><span class=\"token function\">Next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        annotatedTx <span class=\"token operator\">:=</span> <span class=\"token operator\">&amp;</span>query<span class=\"token punctuation\">.</span>AnnotatedTx<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span> err <span class=\"token operator\">:=</span> json<span class=\"token punctuation\">.</span><span class=\"token function\">Unmarshal</span><span class=\"token punctuation\">(</span>txIter<span class=\"token punctuation\">.</span><span class=\"token function\">Value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> annotatedTx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">nil</span><span class=\"token punctuation\">,</span> err\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">annotateTxsAsset</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>query<span class=\"token punctuation\">.</span>AnnotatedTx<span class=\"token punctuation\">{</span>annotatedTx<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        annotatedTxs <span class=\"token operator\">=</span> <span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>query<span class=\"token punctuation\">.</span>AnnotatedTx<span class=\"token punctuation\">{</span>annotatedTx<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> annotatedTxs<span class=\"token operator\">...</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> annotatedTxs<span class=\"token punctuation\">,</span> <span class=\"token boolean\">nil</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>这个方法看起来挺长，实际上逻辑比较简单。如果前端传了<code class=\"gatsby-code-text\">txID</code>，则会在<code class=\"gatsby-code-text\">wallet</code>中寻找指定的id的交易对象；否则的话，取出全部（也就是本文的情况）。其中<code class=\"gatsby-code-text\">calcTxIndexKey(txID)</code>的定义是：</p>\n<p><a href=\"https://github.com/freewind/bytom-v1.0.1/blob/master/wallet/indexer.go#L61-L63\">wallet/indexer.go#L61-L63</a></p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-go\"><code class=\"gatsby-code-go\"><span class=\"token keyword\">func</span> <span class=\"token function\">calcTxIndexKey</span><span class=\"token punctuation\">(</span>txID <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token builtin\">byte</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token function\">byte</span><span class=\"token punctuation\">(</span>TxIndexPrefix <span class=\"token operator\">+</span> txID<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>其中<code class=\"gatsby-code-text\">TxIndexPrefix</code>是<code class=\"gatsby-code-text\">TID:</code>。</p>\n<p><code class=\"gatsby-code-text\">calcAnnotatedKey(formatKey)</code>的定义是：</p>\n<p><a href=\"https://github.com/freewind/bytom-v1.0.1/blob/master/wallet/indexer.go#L53-L55\">wallet/indexer.go#L53-L55</a></p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-go\"><code class=\"gatsby-code-go\"><span class=\"token keyword\">func</span> <span class=\"token function\">calcAnnotatedKey</span><span class=\"token punctuation\">(</span>formatKey <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token builtin\">byte</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token function\">byte</span><span class=\"token punctuation\">(</span>TxPrefix <span class=\"token operator\">+</span> formatKey<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>其中<code class=\"gatsby-code-text\">TxPrefix</code>的值是<code class=\"gatsby-code-text\">TXS:</code>。</p>\n<p>我们再进入<code class=\"gatsby-code-text\">listTransactions</code>的第2处，即<code class=\"gatsby-code-text\">detail</code>那里。如果<code class=\"gatsby-code-text\">detail</code>为<code class=\"gatsby-code-text\">false</code>，则只需要摘要，所以会调用<code class=\"gatsby-code-text\">a.wallet.GetTransactionsSummary(transactions)</code>：</p>\n<p><a href=\"https://github.com/freewind/bytom-v1.0.1/blob/master/wallet/indexer.go#L453-L486\">wallet/indexer.go#L453-L486</a></p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-go\"><code class=\"gatsby-code-go\"><span class=\"token keyword\">func</span> <span class=\"token punctuation\">(</span>w <span class=\"token operator\">*</span>Wallet<span class=\"token punctuation\">)</span> <span class=\"token function\">GetTransactionsSummary</span><span class=\"token punctuation\">(</span>transactions <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>query<span class=\"token punctuation\">.</span>AnnotatedTx<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>TxSummary <span class=\"token punctuation\">{</span>\n    Txs <span class=\"token operator\">:=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>TxSummary<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token boolean\">_</span><span class=\"token punctuation\">,</span> annotatedTx <span class=\"token operator\">:=</span> <span class=\"token keyword\">range</span> transactions <span class=\"token punctuation\">{</span>\n        tmpTxSummary <span class=\"token operator\">:=</span> TxSummary<span class=\"token punctuation\">{</span>\n            Inputs<span class=\"token punctuation\">:</span>    <span class=\"token function\">make</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>Summary<span class=\"token punctuation\">,</span> <span class=\"token function\">len</span><span class=\"token punctuation\">(</span>annotatedTx<span class=\"token punctuation\">.</span>Inputs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            Outputs<span class=\"token punctuation\">:</span>   <span class=\"token function\">make</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>Summary<span class=\"token punctuation\">,</span> <span class=\"token function\">len</span><span class=\"token punctuation\">(</span>annotatedTx<span class=\"token punctuation\">.</span>Outputs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            ID<span class=\"token punctuation\">:</span>        annotatedTx<span class=\"token punctuation\">.</span>ID<span class=\"token punctuation\">,</span>\n            Timestamp<span class=\"token punctuation\">:</span> annotatedTx<span class=\"token punctuation\">.</span>Timestamp<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">for</span> i<span class=\"token punctuation\">,</span> input <span class=\"token operator\">:=</span> <span class=\"token keyword\">range</span> annotatedTx<span class=\"token punctuation\">.</span>Inputs <span class=\"token punctuation\">{</span>\n            tmpTxSummary<span class=\"token punctuation\">.</span>Inputs<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>Type <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>Type\n            tmpTxSummary<span class=\"token punctuation\">.</span>Inputs<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>AccountID <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>AccountID\n            tmpTxSummary<span class=\"token punctuation\">.</span>Inputs<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>AccountAlias <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>AccountAlias\n            tmpTxSummary<span class=\"token punctuation\">.</span>Inputs<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>AssetID <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>AssetID\n            tmpTxSummary<span class=\"token punctuation\">.</span>Inputs<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>AssetAlias <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>AssetAlias\n            tmpTxSummary<span class=\"token punctuation\">.</span>Inputs<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>Amount <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>Amount\n            tmpTxSummary<span class=\"token punctuation\">.</span>Inputs<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>Arbitrary <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>Arbitrary\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">for</span> j<span class=\"token punctuation\">,</span> output <span class=\"token operator\">:=</span> <span class=\"token keyword\">range</span> annotatedTx<span class=\"token punctuation\">.</span>Outputs <span class=\"token punctuation\">{</span>\n            tmpTxSummary<span class=\"token punctuation\">.</span>Outputs<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>Type <span class=\"token operator\">=</span> output<span class=\"token punctuation\">.</span>Type\n            tmpTxSummary<span class=\"token punctuation\">.</span>Outputs<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>AccountID <span class=\"token operator\">=</span> output<span class=\"token punctuation\">.</span>AccountID\n            tmpTxSummary<span class=\"token punctuation\">.</span>Outputs<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>AccountAlias <span class=\"token operator\">=</span> output<span class=\"token punctuation\">.</span>AccountAlias\n            tmpTxSummary<span class=\"token punctuation\">.</span>Outputs<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>AssetID <span class=\"token operator\">=</span> output<span class=\"token punctuation\">.</span>AssetID\n            tmpTxSummary<span class=\"token punctuation\">.</span>Outputs<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>AssetAlias <span class=\"token operator\">=</span> output<span class=\"token punctuation\">.</span>AssetAlias\n            tmpTxSummary<span class=\"token punctuation\">.</span>Outputs<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>Amount <span class=\"token operator\">=</span> output<span class=\"token punctuation\">.</span>Amount\n        <span class=\"token punctuation\">}</span>\n\n        Txs <span class=\"token operator\">=</span> <span class=\"token function\">append</span><span class=\"token punctuation\">(</span>Txs<span class=\"token punctuation\">,</span> tmpTxSummary<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> Txs\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>这一段的代码相当直白，就是从<code class=\"gatsby-code-text\">transactions</code>的元素中取出部分比较重要的信息，组成新的<code class=\"gatsby-code-text\">TxSummary</code>对象，返回过去。最后，这些对象再变成JSON返回给前端。</p>\n<p>那么今天的这个小问题就算解决了，由于有之前的经验可以利用，所以感觉就比较简单了。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bytom-transaction-detail1-63c11e60a5e582dd408d2a2bdea3424c-8f54b.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 840px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 107.85388127853881%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAACNElEQVQ4y5VViXKFIAz0//+0fR4gIKJAmg3GasfXaZ3ZcjxYks3Rzu2JxrjQ8BrIhUDeM0KD4/meM9Va36Jc5vyHur7vaRxHcs6RtVYwzzPNvJ51D2uGY1g7yxpj23OyP1pDH9NI3TQZ6l89pZRo2zaB814eMfyb7KWNlmUhEzwlXuvZNa40eH6YPcSe47Fb15XiEinnQvqta6KZLfDOn3tw3bM816+UQnNaaS353GMLJ+r7gbXzol9g7WZ2A/vGGFkH0daTZWt0DTh+0MDt4y7OdANcM5ZijO2iHHRyGAdBrrrJ/NAPBJBBEBa+u8j9DkT4ECXM4frCEgQGxsiSpLQ1bN8opbZ7VwkQZbCCLLNGE1u777uki50RZS9zkC4cgBgxRplrOoEYaByFCdlkLEBkxkmIEZSVo4Yxs/DlES0HS/1BCA3U7MDWgBDubdveElbkaK7dUO/QqHcIAFIHADl01ErR/f+g+/x8SRJ7iWirEDyCtTvm/0Fz+ahFuAwtRTt2/TfAvfqkIfIHGoAIyYzoabrcEO94ahoIoFgopcWElhMcL+/7xYIjqrXWW9k9dp4roeYiPuTgMJqW1FtLajx4JXr6TsLT5EMbaCjJu+dfLXproW6gu0AbaORZW4hcL6L/iTAcib2za61SihQ+rHy+VM8q+dm180l4RBkNNV+iDNLrqBr/KShKCJe1OWiD0FFLcpNuU964zCUGk9HO8f9BNVzivcPEW7eJYgAI8gFJN777BZ4xukGhf0RjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"bytom-transaction-detail1\"\n        title=\"\"\n        src=\"/static/bytom-transaction-detail1-63c11e60a5e582dd408d2a2bdea3424c-acf85.png\"\n        srcset=\"/static/bytom-transaction-detail1-63c11e60a5e582dd408d2a2bdea3424c-c1418.png 210w,\n/static/bytom-transaction-detail1-63c11e60a5e582dd408d2a2bdea3424c-5d5d8.png 420w,\n/static/bytom-transaction-detail1-63c11e60a5e582dd408d2a2bdea3424c-acf85.png 840w,\n/static/bytom-transaction-detail1-63c11e60a5e582dd408d2a2bdea3424c-8f54b.png 1095w\"\n        sizes=\"(max-width: 840px) 100vw, 840px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bytom-transaction-detail2-9eac917a8af478519aa2b8bc6ab81d19-a62e3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 840px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 114.40520446096653%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsSAAALEgHS3X78AAAB3klEQVQ4y5VV2XKDMAzk/380fWmb4PtC1crYAWJI6pkdgoG1pNUq0+32RdZagda6/3bOXaK9t4UxhqacM2GllMg7TzEm0sZSCIF8iIzAv/nqQwXuY6RlWXaoHJkmfIiV+QaEORd5gAOe1yMylVKoMJGgVFI8m3A6luVwjTYUedNapOVPgUhBuAwJYyVUsxJCRNhfLuUUx5Q7YVwJI6eODbz8e3+QQrTxWUPsH9dLDVmPTtgWNkFmOG1EO4pkhCZsJ8SNZXUzR2K5LWqdlo8JX1KGKCCEgi3dqxRPCVvbzA+um1KiMtJFP6J2glixU3aLMojQey/djhoadD2TosE1RwtYbpePagi7VDLXraf4qo3pZFpEsvLeOztKyjgBkWITqUIQWPKI7hS5LzugHODoKeMDWA8fNDc4v3GIr0Dqfg3iUmVJR3ov9yFwRAjnw2Gg8kxaaWkbKL1LkRE3aI6CuhXlNUK3Fh0PIVC127Lz7lVP9vGFE7cLkX3/3OnBwwKkODDGsZePK2+9LAPWe9lsRO3kf1mvja8ABcV6SaKDop+SlWUwYGceWRAlptqHSUTZ492w2ImC4dpUhuXgDLGe4L31AKmhuCMl6TG3ji1jrChtVmIj/4K+CzQColMc0B8QTRJTE2XcIAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"bytom-transaction-detail2\"\n        title=\"\"\n        src=\"/static/bytom-transaction-detail2-9eac917a8af478519aa2b8bc6ab81d19-acf85.png\"\n        srcset=\"/static/bytom-transaction-detail2-9eac917a8af478519aa2b8bc6ab81d19-c1418.png 210w,\n/static/bytom-transaction-detail2-9eac917a8af478519aa2b8bc6ab81d19-5d5d8.png 420w,\n/static/bytom-transaction-detail2-9eac917a8af478519aa2b8bc6ab81d19-acf85.png 840w,\n/static/bytom-transaction-detail2-9eac917a8af478519aa2b8bc6ab81d19-a62e3.png 1076w\"\n        sizes=\"(max-width: 840px) 100vw, 840px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<hr>\n<p>如果你觉得这些文章对你非常有用，控制不住想打赏作者，可以有以下选择：</p>\n<ol>\n<li>BTM: <code class=\"gatsby-code-text\">0x6bcCfb7265d4aB0C1a71F7d19b9E581cae73D777</code></li>\n<li>BTC: <code class=\"gatsby-code-text\">1Af2Q23Y1kqgtgbryzjS7RxrnEmyvYuX4b</code></li>\n<li>ETH: <code class=\"gatsby-code-text\">0x6bcCfb7265d4aB0C1a71F7d19b9E581cae73D777</code></li>\n</ol>\n<p>多少请随意，心意最重要，我们一起努力吧！</p>","frontmatter":{"title":"通过`/list-transactions`显示交易信息","next":null,"prev":null},"fields":{"path":null,"slug":"docs/bytomanalysis-list-transactions.html"}}},"pathContext":{"slug":"docs/bytomanalysis-list-transactions.html"}}